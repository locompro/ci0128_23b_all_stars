@{
    var isLoggedIn = User.Identity is {IsAuthenticated: true };
}

<div class="row pt-3">
    <div class="col-5">
        <div class="row card-title">
            <h4 class="col-2" style="display: flex; justify-content: center; align-items: center;">
                <i class="fa fa-envelope" style="color: #0a53be; font-size: 33px;">
                </i>
            </h4>
            <h4 id="modalProductName" class="col-10"></h4>
        </div>
        <div class="row card-title" style="margin-bottom: 20px;">
            <h4 class="col-2" style="display: flex; justify-content: center; align-items: center;">
                <i class="fa fa-shopping-cart" style="color: #0a53be; font-size: 33px;"></i>
            </h4>
            <h4 id="modalStoreName" class="col-10" style="margin-top: 6px"></h4>
        </div>
        <div class="row card-title" style="margin-bottom: 20px;">
            <h4 class="col-2" style="display: flex; justify-content: center; align-items: center;">
                <i class="fa fa-certificate" style="color: #0a53be; font-size: 33px;"></i>
            </h4>
            <h6 id="modalModel" class="col-10" style="margin-top: 6px"></h6>
        </div>
        <div class="row card-title" style="margin-bottom: 20px;">
            <h4 class="col-2" style="display: flex; justify-content: center; align-items: center;">
                <i class="fa fa-trademark" style="color: #0a53be; font-size: 33px;"></i>
            </h4>
            <h6 id="modalBrand" class="col-10" style="margin-top: 6px"></h6>
        </div>
        @if (isLoggedIn)
        {
            <form method="post" asp-page-handler="AddToShoppingList" asp-route-productId="1">
                <button type="submit">Add to Shopping List</button>
            </form>
@*             <div class="row card-title" style="margin-bottom: 20px;">
                <h4 class="col-2" style="display: flex; justify-content: center; align-items: center;">
                    <form id="addToShoppingListForm" method="post" asp-page-handler="OnPostAddToShoppingList" asp-route-productId="123">
                        @Html.AntiForgeryToken()
                        <button type="submit" id="ShoppingListButtonId" onclick="addToShoppingList(event)">
                            <i class="fa fa-bookmark" style="color: #0a53be; font-size: 33px;"></i>
                        </button>
                    </form>
                </h4>
                <h6 style="margin-bottom: 20px"> </h6>
            </div>
 *@        }
    </div>
    <div class="slideshow-container col-6" style="width: 380px; height: 220px; text-align: center;">
        <a class="prev col"
           style=""
           id="prevButton"
           onclick="plusSlides(-1)">
            &#10094;
        </a>
        <div id="picturesContainer">
        </div>
        <a class="next col"
           onclick="plusSlides(1)"
           id="nextButton">
            &#10095;
        </a>
    </div>
</div>
<div>
    <div class="pt-4">
        <table id="SubmissionsPerItem" class="display compact mb-0 pe-2" style="width:100%">
            <caption></caption>
            <thead>
            <tr>
                <th>Usuario&nbsp;</th>
                <th class="text-center">Fecha&nbsp;</th>
                <th>Precio&nbsp;</th>
                <th>Descripci贸n&nbsp;</th>
                <th>Calificaci贸n</th>
                <th class="text-center">Reportar</th>
            </tr>
            </thead>
            <tbody id="ItemModalSubmissionsTable" data-is-user-authenticated="@isLoggedIn">
            </tbody>
        </table>
    </div>
    <div class="modal fade no-backdrop-opacity" id="descriptionModal" tabindex="-1" role="dialog" aria-labelledby="descriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 15px; padding: 5px 6px 10px 5px;">
                <div class="modal-header" style="border-bottom: none; padding: 10px 15px;">
                    <h5 class="modal-title" id="descriptionModalLabel" style="flex-grow: 1;">Descripci贸n del reporte</h5>
                </div>
                <div class="modal-body" style="border-top: none; padding: 10px 15px 0px 15px;">
                    <form id="reportForm" method="post" asp-page="/SearchResults/SearchResults" asp-page-handler="ReportSubmission">
                        <div class="form-group">
                            <textarea class="form-control" id="descriptionInput" name="UserReportVm.Description" rows="3"></textarea>
                            <input type="hidden" name="UserReportVm.SubmissionUserId" value="">
                            <input type="hidden" name="UserReportVm.SubmissionEntryTime" value="">
                        </div>
                        <div class="modal-footer" style="border-top: none; padding: 10px 15px 0px 15px;">
                            <button type="submit" class="btn btn-primary">Reportar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="mustBeAuthenticatedModal" tabindex="-1" role="dialog" aria-labelledby="mustBeAuthenticatedModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 15px; padding: 5px 6px 10px 5px;">
                <div class="modal-header" style="border-bottom: none; padding: 10px 15px;">
                    <h5 class="modal-title" id="mustBeAuthenticatedModalTitle" style="flex-grow: 1;">Debes estar identificado para poder calificar aportes</h5>
                </div>
                <div class="modal-footer" style="border-top: none; padding: 10px 15px 0px 15px;">
                    <button role="button" asp-page="Account/Login" class="btn btn-primary" id="mustBeAuthenticatedSignInButton">Iniciar sesi贸n</button>
                </div>
            </div>
        </div>
    </div>
</div>

